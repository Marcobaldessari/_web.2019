function windowLoaded(){drawDefaultImage(),loop(),xPosition=canvas.width/2-logoWhite.naturalWidth/2,yPosition=0,console.log(logoWhite.naturalWidth/2)}function glitch(){getShadowsImg(),ctx.clearRect(0,0,canvas.width,canvas.height),imageObjShadow.onload=function(){ctx.clearRect(0,0,canvas.width,canvas.height),ctx.drawImage(logoWhite,xPosition,yPosition);for(var a=lineShadowsHeight(),t=0,o=0;o<a.length;o++)ctx.drawImage(this,0,t,canvas.width,a[o],getRandomInt(-2*offset(),2*offset()),t,canvas.width,a[o]),t+=a[o];drawDefaultImage(),imageDataWithShadow=canvas.toDataURL("image/png",1),imageObjWithShadow.onload=function(){ctx.clearRect(0,0,canvas.width,canvas.height),ctx.drawImage(this,0,0,canvas.width,canvas.height/3+5,1,0,canvas.width,canvas.height/3+5),ctx.drawImage(this,0,canvas.height/3+5,canvas.width,canvas.height/3-5,0,canvas.height/3+5,canvas.width,canvas.height/3-5),ctx.drawImage(this,0,canvas.height/3*2,canvas.width,canvas.height/3,0,canvas.height/3*2,canvas.width,canvas.height/3)},imageObjWithShadow.src=imageDataWithShadow},imageObjShadow.src=imageDataShadows,setTimeout(function(){imageObjWithShadow.onload=function(){ctx.clearRect(0,0,canvas.width,canvas.height);for(var a=lineShadowsHeight(),t=0,o=0;o<a.length;o++)ctx.drawImage(this,0,t,canvas.width,a[o],getRandomInt(-2*offset(),2*offset()),t,canvas.width,a[o]),t+=a[o]},imageObjWithShadow.src=imageDataWithShadow},80),setTimeout(function(){ctx.clearRect(0,0,canvas.width,canvas.height),drawDefaultImage()},getRandomInt(80,500))}function drawDefaultImage(){ctx.drawImage(logoWhite,xPosition,yPosition)}function getShadowsImg(){ctx.save(),ctx.globalCompositeOperation="destination-over",ctx.clearRect(0,0,canvas.width,canvas.height),ctx.drawImage(logoBlue,xPosition-getRandomInt(2,10),yPosition),ctx.drawImage(logoRed,xPosition+getRandomInt(2,10),yPosition),imageDataShadows=canvas.toDataURL("image/png",1),ctx.restore()}function getRandomInt(a,t){return Math.floor(Math.random()*(t-a+1)+a)}function loop(){window.setTimeout(function(){glitch(),loop()},1e3*Math.random())}var canvas,ctx,dpr,logoWhite,logoBlue,logoRed,xPosition,yPosition,imageObjShadow,imageObjWithShadow,imageDataShadows,imageDataWithShadow;canvas=document.getElementById("myCanvas"),ctx=canvas.getContext("2d"),dpr=1/(window.devicePixelRatio||1),logoWhite=new Image,logoBlue=new Image,logoRed=new Image,logoWhite.src="../img/logo-white@2x.png",logoBlue.src="../img/logo-blue@2x.png",logoRed.src="../img/logo-red@2x.png",imageObjShadow=new Image,imageObjWithShadow=new Image,canvas.addEventListener("click",glitch,!1),window.addEventListener("load",windowLoaded,!1);var glitchLinesAmount=function(){return Math.floor(4*Math.random()+4)},offset=function(){return Math.floor(30*Math.random())},lineShadowsHeight=function(){for(var a=canvas.height,t=glitchLinesAmount(),o=[],e=0,i=0;i<t;i++)o[i]=Math.floor(Math.random()*(a/(t-1)-1)+8),a-=o[i],e+=o[i],o[t]=canvas.height-e;return o};